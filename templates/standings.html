{% extends "base.html" %}

{% block content %}
<div class="mb-8">
    <div class="glass-card rounded-xl p-6 mb-8">
        <h1 class="text-3xl font-bold text-white mb-2">League Standings</h1>
        <p class="text-primary-400">Current Season Rankings</p>
    </div>
    
    <div class="glass-card rounded-xl p-6 mb-8">
        <label for="league-select" class="block text-sm font-medium text-gray-300 mb-2">Select League:</label>
        <select id="league-select" class="bg-dark-600 text-white rounded px-4 py-2 w-full md:w-1/3">
            {% for code, league in leagues.items() %}
            <option value="{{ code }}" {% if code == selected_league %}selected{% endif %}>
                {{ league.name }} ({{ league.country }})
            </option>
            {% endfor %}
        </select>
    </div>
    
    {% if not standings %}
        <div class="glass-card rounded-xl p-6 text-center">
            <p class="text-gray-400">No standings available for this league.</p>
        </div>
    {% else %}
        {% for standing in standings %}
            <div class="glass-card rounded-xl p-6 mb-8">
                <div class="flex items-center mb-6">
                    <img src="{{ standing.competition.emblem }}" alt="{{ standing.competition.name }}" class="h-10 w-10 mr-4">
                    <h2 class="text-2xl font-semibold text-white">{{ standing.competition.name }}</h2>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-700">
                        <thead class="bg-dark-600">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">#</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Team</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">P</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">W</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">D</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">L</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">GD</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">Pts</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-700">
                            {% for team in standing.table %}
                            <tr class="{{ 'bg-primary-900/30' if loop.index <= 4 else 'bg-dark-700/50' }}">
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-medium">{{ team.position }}</td>
                                <td class="px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <img src="{{ team.team.crest }}" alt="{{ team.team.name }}" class="h-6 w-6 mr-2">
                                        <span class="text-sm font-medium">{{ team.team.shortName or team.team.name }}</span>
                                    </div>
                                </td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-center">{{ team.playedGames }}</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-center">{{ team.won }}</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-center">{{ team.draw }}</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-center">{{ team.lost }}</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-center">{{ team.goalDifference }}</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-bold text-center">{{ team.points }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>

<script>
    document.getElementById('league-select').addEventListener('change', function() {
        window.location.href = `/standings?league=${this.value}`;
    });
</script>
{% endblock %}